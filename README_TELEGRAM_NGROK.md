# ๐ฏ Telegram ะฐะฒัะพัะธะทะฐัะธั ัะตัะตะท Docker + Ngrok

## โ ะงัะพ ัะดะตะปะฐะฝะพ

1. โ Backend ะธัะฟัะฐะฒะปะตะฝ (SECRET_KEY ะฝะฐัััะพะตะฝ)
2. โ Telegram Login Widget ะธะฝัะตะณัะธัะพะฒะฐะฝ
3. โ Ngrok ะดะพะฑะฐะฒะปะตะฝ ะฒ docker-compose
4. โ ะะฒัะพะผะฐัะธัะตัะบะพะต ะพะฟัะตะดะตะปะตะฝะธะต localhost
5. โ ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั

## ๐ ะะฐะบ ะทะฐะฟัััะธัั

### ะะฐัะธะฐะฝั 1: ะะพะบะฐะปัะฝะพ (ะฑะตะท ะฒะธะดะถะตัะฐ)

ะัะพััะพ ะพัะบัะพะนัะต: http://localhost:3000/login

ะั ัะฒะธะดะธัะต ัะพะพะฑัะตะฝะธะต, ััะพ ะฒะธะดะถะตั ะฝะต ัะฐะฑะพัะฐะตั ะฝะฐ localhost, ะธ ัััะปะบั ะฝะฐ ะฑะพัะฐ.

### ะะฐัะธะฐะฝั 2: ะก ngrok (ะฟะพะปะฝะพัะตะฝะฝัะน ะฒะธะดะถะตั)

**ะกะปะตะดัะนัะต ะธะฝััััะบัะธะธ:** [TELEGRAM_QUICKSTART.md](./TELEGRAM_QUICKSTART.md)

ะัะฐัะบะพ:
```bash
# 1. ะะพะปััะธัะต ัะพะบะตะฝ ะฝะฐ https://dashboard.ngrok.com/
# 2. ะะพะฑะฐะฒััะต ะฒ .env: NGROK_AUTHTOKEN=ะฒะฐั_ัะพะบะตะฝ
# 3. ะะฐะฟัััะธัะต ngrok
docker-compose --profile dev up -d ngrok

# 4. ะะพะปััะธัะต URL
# ะัะบัะพะนัะต http://localhost:4040

# 5. ะะฐัััะพะนัะต BotFather
# /setdomain -> @oko_expert_bot -> ะฒะฐั_ngrok_ะดะพะผะตะฝ

# 6. ะะฑะฝะพะฒะธัะต CORS ะฒ config/settings.py
# 7. ะะตัะตะทะฐะฟัััะธัะต backend
docker-compose restart backend

# 8. ะัะบัะพะนัะต ngrok URL ะฒ ะฑัะฐัะทะตัะต
```

## ๐ ะะพะบัะผะตะฝัะฐัะธั

### ะัะฝะพะฒะฝัะต ะธะฝััััะบัะธะธ

- **[TELEGRAM_QUICKSTART.md](./TELEGRAM_QUICKSTART.md)** - ะัััััะน ััะฐัั (5 ะผะธะฝัั)
- **[NGROK_DOCKER.md](./NGROK_DOCKER.md)** - ะะพะปะฝะฐั ะดะพะบัะผะตะฝัะฐัะธั ะฟะพ ngrok
- **[TELEGRAM_SETUP_BOTFATHER.md](./TELEGRAM_SETUP_BOTFATHER.md)** - ะะฐัััะพะนะบะฐ ะฑะพัะฐ

### ะะพะฟะพะปะฝะธัะตะปัะฝะพ

- **[NGROK_SETUP.md](./NGROK_SETUP.md)** - ะะพะบะฐะปัะฝะฐั ัััะฐะฝะพะฒะบะฐ ngrok (ะฐะปััะตัะฝะฐัะธะฒะฐ)
- **[EMAIL_SETUP.md](./EMAIL_SETUP.md)** - ะะฐัััะพะนะบะฐ email ะฒะตัะธัะธะบะฐัะธะธ
- **[TELEGRAM_AUTH_README.md](./TELEGRAM_AUTH_README.md)** - ะะฐะบ ัะฐะฑะพัะฐะตั ะฐะฒัะพัะธะทะฐัะธั

## ๐๏ธ ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                    ะะพะปัะทะพะฒะฐัะตะปั                          โ
โโโโโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                     โ
                     โผ
         โโโโโโโโโโโโโโโโโโโโโโโโโ
         โ   Ngrok (ะพะฟัะธะพะฝะฐะปัะฝะพ)  โ
         โ  https://abc.ngrok.io  โ
         โโโโโโโโโโโโโฌโโโโโโโโโโโโโ
                     โ
                     โผ
         โโโโโโโโโโโโโโโโโโโโโโโโโ
         โ   Frontend (React)     โ
         โ   localhost:3000       โ
         โโโโโโโโโโโโโฌโโโโโโโโโโโโโ
                     โ
                     โผ
         โโโโโโโโโโโโโโโโโโโโโโโโโ
         โ   Backend (Django)     โ
         โ   localhost:8000       โ
         โโโโโโโโโโโโโฌโโโโโโโโโโโโโ
                     โ
         โโโโโโโโโโโโโดโโโโโโโโโโโโโ
         โผ                        โผ
โโโโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโโโโ
โ   PostgreSQL   โ      โ  Telegram API   โ
โ   localhost:5432โ      โ  (ะฟัะพะฒะตัะบะฐ auth)โ
โโโโโโโโโโโโโโโโโโ      โโโโโโโโโโโโโโโโโโโ
```

## ๐ง ะะพะผะฐะฝะดั Docker

### ะัะฝะพะฒะฝัะต

```bash
# ะะฐะฟัััะธัั ะฒัะต ัะตัะฒะธัั
docker-compose up -d

# ะะฐะฟัััะธัั ั ngrok
docker-compose --profile dev up -d

# ะััะฐะฝะพะฒะธัั ะฒัะต
docker-compose down

# ะะตัะตะทะฐะฟัััะธัั backend
docker-compose restart backend

# ะะพัะผะพััะตัั ะปะพะณะธ
docker-compose logs -f backend
docker-compose logs -f ngrok
```

### Ngrok

```bash
# ะะฐะฟัััะธัั ัะพะปัะบะพ ngrok
docker-compose --profile dev up -d ngrok

# ะััะฐะฝะพะฒะธัั ngrok
docker-compose stop ngrok

# ะะพัะผะพััะตัั URL
docker-compose logs ngrok | findstr "url="

# Web UI
# ะัะบัะพะนัะต http://localhost:4040
```

## ๐ ะะตัะตะฝะธะต ะฟัะพะฑะปะตะผ

### Backend ะฝะต ะทะฐะฟััะบะฐะตััั

```bash
# ะัะพะฒะตัััะต ะปะพะณะธ
docker-compose logs backend

# ะัะพะฒะตัััะต SECRET_KEY ะฒ .env
# ะะตัะตะทะฐะฟัััะธัะต
docker-compose restart backend
```

### Telegram ะฒะธะดะถะตั ะฝะต ะฟะพัะฒะปัะตััั

1. ะฃะฑะตะดะธัะตัั, ััะพ ะธัะฟะพะปัะทัะตัะต ngrok URL (ะฝะต localhost)
2. ะัะพะฒะตัััะต ะบะพะฝัะพะปั ะฑัะฐัะทะตัะฐ (F12)
3. ะัะพะฒะตัััะต, ััะพ ะดะพะผะตะฝ ะฝะฐัััะพะตะฝ ะฒ BotFather

### CORS ะพัะธะฑะบะธ

1. ะะพะฑะฐะฒััะต ngrok URL ะฒ `config/settings.py`:
```python
CORS_ALLOWED_ORIGINS = [
    "http://localhost:3000",
    "https://ะฒะฐั-ngrok-url.ngrok.io",
]
```

2. ะะตัะตะทะฐะฟัััะธัะต backend:
```bash
docker-compose restart backend
```

### Ngrok ะฝะต ะทะฐะฟััะบะฐะตััั

1. ะัะพะฒะตัััะต NGROK_AUTHTOKEN ะฒ .env
2. ะะพัะผะพััะธัะต ะปะพะณะธ: `docker-compose logs ngrok`
3. ะฃะฑะตะดะธัะตัั, ััะพ ัะพะบะตะฝ ะฒะฐะปะธะดะฝัะน

## ๐ ะะพะฝะธัะพัะธะฝะณ

### Ngrok Web UI

ะัะบัะพะนัะต: http://localhost:4040

ะะดะตัั ะผะพะถะฝะพ:
- ะัะพัะผะฐััะธะฒะฐัั ะฒัะต HTTP ะทะฐะฟัะพัั
- ะะพะฒัะพัััั ะทะฐะฟัะพัั ะดะปั ะพัะปะฐะดะบะธ
- ะะธะดะตัั ะทะฐะณะพะปะพะฒะบะธ ะธ ัะตะปะฐ ะทะฐะฟัะพัะพะฒ/ะพัะฒะตัะพะฒ

### Docker ััะฐััั

```bash
# ะะพัะผะพััะตัั ะทะฐะฟััะตะฝะฝัะต ะบะพะฝัะตะนะฝะตัั
docker-compose ps

# ะะพัะผะพััะตัั ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ัะตััััะพะฒ
docker stats
```

## ๐ ะะปั ะฟัะพะดะฐะบัะตะฝะฐ

ะะฐ ะฟัะพะดะฐะบัะตะฝะต ngrok ะฝะต ะฝัะถะตะฝ!

1. ะฃะบะฐะถะธัะต ะฒะฐั ะดะพะผะตะฝ ะฒ BotFather:
```
/setdomain
@oko_expert_bot
yourdomain.com
```

2. ะะฐัััะพะนัะต HTTPS (ะพะฑัะทะฐัะตะปัะฝะพ ะดะปั Telegram)

3. ะะฑะฝะพะฒะธัะต CORS:
```python
CORS_ALLOWED_ORIGINS = [
    "https://yourdomain.com",
]
```

4. ะะธะดะถะตั ะฑัะดะตั ัะฐะฑะพัะฐัั ะฐะฒัะพะผะฐัะธัะตัะบะธ

## ๐ ะะพะปะตะทะฝัะต ัััะปะบะธ

- [Ngrok Dashboard](https://dashboard.ngrok.com/)
- [BotFather](https://t.me/BotFather)
- [Telegram Login Widget Docs](https://core.telegram.org/widgets/login)
- [Django CORS Settings](https://github.com/adamchainz/django-cors-headers)

## ๐ก ะกะพะฒะตัั

1. **ะะตัะฟะปะฐัะฝัะน ngrok** ะณะตะฝะตัะธััะตั ะฝะพะฒัะน URL ะฟัะธ ะบะฐะถะดะพะผ ะฟะตัะตะทะฐะฟััะบะต
2. **ะะปะฐัะฝัะน ngrok** ($8/ะผะตั) ะดะฐะตั ัะธะบัะธัะพะฒะฐะฝะฝัะน ะฟะพะดะดะพะผะตะฝ
3. **Web UI** (localhost:4040) ะพัะตะฝั ะฟะพะปะตะทะตะฝ ะดะปั ะพัะปะฐะดะบะธ
4. **ะะต ะบะพะผะผะธัััะต** NGROK_AUTHTOKEN ะฒ git (ะพะฝ ะฒ .gitignore)

---

**ะัะต ะณะพัะพะฒะพ! ะกะปะตะดัะนัะต [TELEGRAM_QUICKSTART.md](./TELEGRAM_QUICKSTART.md) ะดะปั ะทะฐะฟััะบะฐ.** ๐
