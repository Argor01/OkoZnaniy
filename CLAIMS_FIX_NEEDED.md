# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ: –ü—Ä–µ—Ç–µ–Ω–∑–∏–∏ –∏–∑ —á–∞—Ç–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ –Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤ –ë–î

## –ü—Ä–æ–±–ª–µ–º–∞
–ö–æ–≥–¥–∞ —ç–∫—Å–ø–µ—Ä—Ç –ø–æ–¥–∞–µ—Ç –ø—Ä–µ—Ç–µ–Ω–∑–∏—é —á–µ—Ä–µ–∑ —á–∞—Ç, –æ–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –∫–∞–∫ —Ç–µ–∫—Å—Ç–æ–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π, –Ω–æ –Ω–µ —Å–æ–∑–¥–∞–µ—Ç—Å—è –æ–±—ä–µ–∫—Ç Claim –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

## –¢–µ–∫—É—â–µ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
–í `MessageModalNew.tsx` —Ñ—É–Ω–∫—Ü–∏—è `handleSubmitClaim`:
1. –§–æ—Ä–º–∏—Ä—É–µ—Ç —Ç–µ–∫—Å—Ç –ø—Ä–µ—Ç–µ–Ω–∑–∏–∏
2. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –µ–≥–æ –∫–∞–∫ –æ–±—ã—á–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ —á–µ—Ä–µ–∑ `chatApi.sendMessage()` –∏–ª–∏ `chatApi.sendMessageWithFiles()`
3. –ù–ï —Å–æ–∑–¥–∞–µ—Ç –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ `claims`

## –ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

### 1. –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è –≤ API
‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏—è `chatApi.createClaim()` –≤ `frontend-react/src/api/chat.ts`

### 2. –û–±–Ω–æ–≤–∏—Ç—å MessageModalNew.tsx
–ù—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å —Ñ—É–Ω–∫—Ü–∏—é `handleSubmitClaim` —á—Ç–æ–±—ã:
1. –°–æ–∑–¥–∞–≤–∞—Ç—å –æ–±—ä–µ–∫—Ç Claim —á–µ—Ä–µ–∑ API: `chatApi.createClaim()`
2. –ó–∞—Ç–µ–º –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ —Å–æ–∑–¥–∞–Ω–Ω—É—é –ø—Ä–µ—Ç–µ–Ω–∑–∏—é

### 3. –ú–∞–ø–ø–∏–Ω–≥ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø—Ä–µ—Ç–µ–Ω–∑–∏–π
–¢–µ–∫—É—â–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ UI:
- '–ó–∞–∫–∞–∑ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω'
- '–ó–∞–∫–∞–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ/—á–∞—Å—Ç–∏—á–Ω–æ'
- '–ù–∞—Ä—É—à–µ–Ω–∏–µ —Å—Ä–æ–∫–æ–≤'
- '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ'
- '–î—Ä—É–≥–æ–µ'

–ù—É–∂–Ω–æ –∑–∞–º–∞–ø–∏—Ç—å –Ω–∞ —Ç–∏–ø—ã –≤ –ë–î:
- 'complaint' - –ñ–∞–ª–æ–±–∞
- 'refund' - –í–æ–∑–≤—Ä–∞—Ç —Å—Ä–µ–¥—Å—Ç–≤
- 'quality' - –ö–∞—á–µ—Å—Ç–≤–æ —Ä–∞–±–æ—Ç—ã
- 'other' - –î—Ä—É–≥–æ–µ

### 4. –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞ –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

```typescript
const handleSubmitClaim = async () => {
  // ... –≤–∞–ª–∏–¥–∞—Ü–∏—è ...
  
  setClaimSubmitting(true);
  try {
    // 1. –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–∏–ø –ø—Ä–µ—Ç–µ–Ω–∑–∏–∏
    const claimTypeMap: Record<string, string> = {
      '–ó–∞–∫–∞–∑ –Ω–µ –≤—ã–ø–æ–ª–Ω–µ–Ω': 'refund',
      '–ó–∞–∫–∞–∑ –≤—ã–ø–æ–ª–Ω–µ–Ω –Ω–µ–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ/—á–∞—Å—Ç–∏—á–Ω–æ': 'quality',
      '–ù–∞—Ä—É—à–µ–Ω–∏–µ —Å—Ä–æ–∫–æ–≤': 'complaint',
      '–ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ': 'complaint',
      '–î—Ä—É–≥–æ–µ': 'other',
    };
    
    const claimType = claimTypeMap[selectedClaimCategory] || 'other';
    
    // 2. –°–æ–∑–¥–∞–µ–º –ø—Ä–µ—Ç–µ–Ω–∑–∏—é –≤ –ë–î
    const claim = await chatApi.createClaim({
      order_id: activeOrderId || undefined,
      claim_type: claimType,
      subject: selectedClaimCategory,
      description: claimText.trim(),
    });
    
    // 3. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç —Å–æ —Å—Å—ã–ª–∫–æ–π –Ω–∞ –ø—Ä–µ—Ç–µ–Ω–∑–∏—é
    const claimMessage = `üö® –ü–†–ï–¢–ï–ù–ó–ò–Ø #${claim.id}: ${selectedClaimCategory}\n\n${claimText.trim()}`;
    
    // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è ...
  } catch (error) {
    antMessage.error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –ø—Ä–µ—Ç–µ–Ω–∑–∏—é');
  } finally {
    setClaimSubmitting(false);
  }
};
```

## –°—Ç–∞—Ç—É—Å
- ‚úÖ API —Ñ—É–Ω–∫—Ü–∏—è –¥–æ–±–∞–≤–ª–µ–Ω–∞
- ‚è≥ –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å MessageModalNew.tsx
- ‚è≥ –ù—É–∂–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–µ—Ç–µ–Ω–∑–∏–π

## –î–∞—Ç–∞
14 —Ñ–µ–≤—Ä–∞–ª—è 2026
