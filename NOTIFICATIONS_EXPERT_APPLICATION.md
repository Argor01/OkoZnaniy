# üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∞–Ω–∫–µ—Ç—ã —ç–∫—Å–ø–µ—Ä—Ç–∞

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

–°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –µ–≥–æ –∞–Ω–∫–µ—Ç—ã —ç–∫—Å–ø–µ—Ä—Ç–∞.

## üì¨ –¢–∏–ø—ã —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

### 1. –ê–Ω–∫–µ—Ç–∞ –æ–¥–æ–±—Ä–µ–Ω–∞ ‚úÖ
**–ö–æ–≥–¥–∞:** –î–∏—Ä–µ–∫—Ç–æ—Ä –æ–¥–æ–±—Ä—è–µ—Ç –∞–Ω–∫–µ—Ç—É (–∫–Ω–æ–ø–∫–∞ "–û–¥–æ–±—Ä–∏—Ç—å")

**–ß—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üìß –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–ê–Ω–∫–µ—Ç–∞ –æ–¥–æ–±—Ä–µ–Ω–∞"
- üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ: "–í–∞—à–∞ –∞–Ω–∫–µ—Ç–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ –±—ã–ª–∞ –æ–¥–æ–±—Ä–µ–Ω–∞! –¢–µ–ø–µ—Ä—å –≤—ã –º–æ–∂–µ—Ç–µ –±—Ä–∞—Ç—å –∑–∞–∫–∞–∑—ã –≤ —Ä–∞–±–æ—Ç—É."
- üéØ –†–æ–ª—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "expert"

**–ö–æ–¥:**
```python
# –í apps/director/views.py
@action(detail=True, methods=['post'])
def approve(self, request, pk=None):
    application = self.get_object()
    application.status = 'approved'
    application.save()
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    NotificationService.notify_application_approved(application)
```

### 2. –ê–Ω–∫–µ—Ç–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞ ‚ùå
**–ö–æ–≥–¥–∞:** –î–∏—Ä–µ–∫—Ç–æ—Ä –æ—Ç–∫–ª–æ–Ω—è–µ—Ç –∞–Ω–∫–µ—Ç—É (–∫–Ω–æ–ø–∫–∞ "–û—Ç–∫–ª–æ–Ω–∏—Ç—å")

**–ß—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üìß –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–ê–Ω–∫–µ—Ç–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞"
- üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ: "–ö —Å–æ–∂–∞–ª–µ–Ω–∏—é, –≤–∞—à–∞ –∞–Ω–∫–µ—Ç–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ –±—ã–ª–∞ –æ—Ç–∫–ª–æ–Ω–µ–Ω–∞. –ü—Ä–∏—á–∏–Ω–∞: {–ø—Ä–∏—á–∏–Ω–∞}"
- ‚ö†Ô∏è –†–æ–ª—å –æ—Å—Ç–∞–µ—Ç—Å—è "client"

**–ö–æ–¥:**
```python
# –í apps/director/views.py
@action(detail=True, methods=['post'])
def reject(self, request, pk=None):
    reason = request.data.get('reason', '')
    application = self.get_object()
    application.status = 'rejected'
    application.rejection_reason = reason
    application.save()
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    NotificationService.notify_application_rejected(application, reason)
```

### 3. –¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ üîÑ
**–ö–æ–≥–¥–∞:** –î–∏—Ä–µ–∫—Ç–æ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É (–∫–Ω–æ–ø–∫–∞ "–ù–∞ –¥–æ—Ä–∞–±–æ—Ç–∫—É")

**–ß—Ç–æ –ø–æ–ª—É—á–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å:**
- üîî –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- üìß –ó–∞–≥–æ–ª–æ–≤–æ–∫: "–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞ –∞–Ω–∫–µ—Ç—ã"
- üí¨ –°–æ–æ–±—â–µ–Ω–∏–µ: "–í–∞—à–∞ –∞–Ω–∫–µ—Ç–∞ —Ç—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏. –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π: {–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π}"
- üîÑ –°—Ç–∞—Ç—É—Å –º–µ–Ω—è–µ—Ç—Å—è –Ω–∞ "pending"

**–ö–æ–¥:**
```python
# –í apps/director/views.py
@action(detail=True, methods=['post'])
def rework(self, request, pk=None):
    comment = request.data.get('comment', '')
    application = self.get_object()
    application.status = 'pending'
    application.rejection_reason = f"–¢—Ä–µ–±—É–µ—Ç—Å—è –¥–æ—Ä–∞–±–æ—Ç–∫–∞: {comment}"
    application.save()
    
    # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
    NotificationService.notify_application_rework(application, comment)
```

## üîÑ –ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç

### Backend (Django)

1. **–î–∏—Ä–µ–∫—Ç–æ—Ä –≤—ã–ø–æ–ª–Ω—è–µ—Ç –¥–µ–π—Å—Ç–≤–∏–µ** (–æ–¥–æ–±—Ä–∏—Ç—å/–æ—Ç–∫–ª–æ–Ω–∏—Ç—å/–¥–æ—Ä–∞–±–æ—Ç–∫–∞)
2. **–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è —Å—Ç–∞—Ç—É—Å –∞–Ω–∫–µ—Ç—ã** –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
3. **–í—ã–∑—ã–≤–∞–µ—Ç—Å—è NotificationService** –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
4. **–°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å –≤ —Ç–∞–±–ª–∏—Ü–µ Notification**
5. **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è** —Å —Ç–∏–ø–æ–º –∏ –¥–∞–Ω–Ω—ã–º–∏

### Frontend (React)

1. **–•—É–∫ useNotifications** –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
2. **–ó–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –Ω–æ–≤—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** —á–µ—Ä–µ–∑ API
3. **–°—á–µ—Ç—á–∏–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö** –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ö–µ–¥–µ—Ä–µ
4. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç** –∫—Ä–∞—Å–Ω—ã–π –∫—Ä—É–∂–æ–∫ –Ω–∞ –∏–∫–æ–Ω–∫–µ üîî
5. **–ü—Ä–∏ –∫–ª–∏–∫–µ** –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª–∫–∞ —Å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è–º–∏

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

```json
{
  "id": 123,
  "type": "application_approved",
  "title": "–ê–Ω–∫–µ—Ç–∞ –æ–¥–æ–±—Ä–µ–Ω–∞",
  "message": "–í–∞—à–∞ –∞–Ω–∫–µ—Ç–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ –±—ã–ª–∞ –æ–¥–æ–±—Ä–µ–Ω–∞!",
  "is_read": false,
  "created_at": "2024-12-12T10:30:00Z",
  "related_object_id": 456,
  "related_object_type": "expert_application",
  "data": {
    "application_id": 456
  }
}
```

## üéØ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ

–ï—Å–ª–∏ –≤—ã –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ `DashboardWithChatAndNotifications`:

```tsx
import DashboardWithChatAndNotifications from '../components/DashboardWithChatAndNotifications';

const MyDashboard = () => (
  <DashboardWithChatAndNotifications userProfile={userProfile}>
    <YourContent />
  </DashboardWithChatAndNotifications>
);
```

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –±—É–¥—É—Ç:
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å—Å—è –∫–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥
- ‚úÖ –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å —Å—á–µ—Ç—á–∏–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö
- ‚úÖ –û—Ç–∫—Ä—ã–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∫–ª–∏–∫–µ –Ω–∞ –∏–∫–æ–Ω–∫—É üîî

### –†—É—á–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

```tsx
import { useNotifications } from '../hooks/useNotifications';

const MyComponent = () => {
  const { notifications, unreadCount, markAsRead } = useNotifications();
  
  return (
    <div>
      <Badge count={unreadCount}>
        <BellOutlined />
      </Badge>
      
      {notifications.map(notif => (
        <div key={notif.id} onClick={() => markAsRead(notif.id)}>
          <h4>{notif.title}</h4>
          <p>{notif.message}</p>
        </div>
      ))}
    </div>
  );
};
```

## üîß API Endpoints

### –ü–æ–ª—É—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
```http
GET /api/notifications/
Authorization: Bearer {token}
```

**–û—Ç–≤–µ—Ç:**
```json
[
  {
    "id": 123,
    "type": "application_approved",
    "title": "–ê–Ω–∫–µ—Ç–∞ –æ–¥–æ–±—Ä–µ–Ω–∞",
    "message": "–í–∞—à–∞ –∞–Ω–∫–µ—Ç–∞ —ç–∫—Å–ø–µ—Ä—Ç–∞ –±—ã–ª–∞ –æ–¥–æ–±—Ä–µ–Ω–∞!",
    "is_read": false,
    "created_at": "2024-12-12T10:30:00Z"
  }
]
```

### –û—Ç–º–µ—Ç–∏—Ç—å –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–µ
```http
POST /api/notifications/{id}/mark_read/
Authorization: Bearer {token}
```

### –û—Ç–º–µ—Ç–∏—Ç—å –≤—Å–µ –∫–∞–∫ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã–µ
```http
POST /api/notifications/mark_all_read/
Authorization: Bearer {token}
```

## üé® –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å, –∫–∞–∫–∏–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª—É—á–∞—Ç—å:

```tsx
const [settings, setSettings] = useState({
  orderConfirmation: true,
  claims: true,
  messages: true,
  balanceTopUp: true,
  bids: true,
  systemUpdates: true,
});

<NotificationSystem
  settings={settings}
  onSettingsChange={setSettings}
/>
```

## üì± –ú–æ–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è

–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø–æ–ª–Ω–æ—Å—Ç—å—é –∞–¥–∞–ø—Ç–∏–≤–Ω—ã:
- ‚úÖ –†–∞–±–æ—Ç–∞—é—Ç –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- ‚úÖ Touch-friendly –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω—ã –¥–ª—è –º–∞–ª–µ–Ω—å–∫–∏—Ö —ç–∫—Ä–∞–Ω–æ–≤

## üöÄ –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ

### –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–π —Ç–∏–ø —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è

1. **–î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø –≤ models.py:**
```python
class NotificationType(models.TextChoices):
    # ...
    NEW_TYPE = 'new_type', '–ù–æ–≤—ã–π —Ç–∏–ø'
```

2. **–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–æ–¥ –≤ services.py:**
```python
@staticmethod
def notify_new_type(obj):
    NotificationService.create_notification(
        recipient=obj.user,
        type=NotificationType.NEW_TYPE,
        title="–ó–∞–≥–æ–ª–æ–≤–æ–∫",
        message="–°–æ–æ–±—â–µ–Ω–∏–µ",
        related_object_id=obj.id,
        related_object_type='object_type'
    )
```

3. **–í—ã–∑–≤–∞—Ç—å –≤ –Ω—É–∂–Ω–æ–º –º–µ—Å—Ç–µ:**
```python
NotificationService.notify_new_type(obj)
```

## üéâ –ì–æ—Ç–æ–≤–æ!

–¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∞–Ω–∫–µ—Ç—ã:
- ‚úÖ –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚úÖ –°—á–µ—Ç—á–∏–∫ –Ω–µ–ø—Ä–æ—á–∏—Ç–∞–Ω–Ω—ã—Ö –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- ‚úÖ –£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- ‚úÖ –ú–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∏—Å—Ç–æ—Ä–∏—é —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

---

**–í—Ä–µ–º—è –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** –ö–∞–∂–¥—ã–µ 30 —Å–µ–∫—É–Ω–¥  
**–•—Ä–∞–Ω–µ–Ω–∏–µ:** –ë–µ—Å—Å—Ä–æ—á–Ω–æ (–ø–æ–∫–∞ –Ω–µ —É–¥–∞–ª–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–∞–µ—Ç
